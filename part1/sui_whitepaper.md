# Sui : 一个新的智能合约平台

## 1.介绍
Sui是一个分布式、开放的智能合约平台，侧重于低延时的去管理资产。它使用Move编程语言来将资产定义为可能属于某个地址的对象。Move程序定义了对这些类型化了的对象的操作，包括自定义初始化规则、资产如何传递给新的拥有者、以及改变资产的操作。Sui是由一组无权限的节点(authorities)维护，这些节点的角色类似于其他区块链中的验证器或是矿工。它在授权机构之间使用拜占庭一致的广播协议，以确保对资产进行操作的安全性。与拜占庭协议相比，确保了更低的延迟和更好的可伸缩性。它仅依赖于拜占庭协议来保证共享对象的安全，以及在关键延迟路径之外执行的治理操作和检查点。在某些情况下，智能合约的执行也会自然地并行化。Sui支持轻客户端来验证读取，也支持完整的客户端来审核所有状态转换的完整性。这些设施允许与其他类型的区块链建设的信任最小化的桥梁。

链上原生资产SUI代币用来支付所有链上操作的gas费用。SUI代币也被它的所有者用来在不同epoch内委托质押给不同的节点来管理Sui。这些节点会定期的根据这些委托质押给他们的SUI来重置配置。被使用的gas会根据分配给这些节点，还有根据质押SUI的比例分配给质押者们。

本白皮书氛围两部分，第二部分描述了基于Move语言的Sui编程模型，第四部分描述了确保Sui的安全性、活跃性和性能的无许可去中心化分布式系统的操作。


## 2.Sui智能合约编程
Sui的智能合约是用Move语言编写的。Move安全且富有表现力，其类型系统和数据模型天然支持并行协议/执行操作来使得Sui具有很强的可伸缩性。Move是一种用来构建智能合约的开源编程语言，最开始是在Facebook为了Diem区块链开发的。Move语言和平台无关，除了被Sui采用之外，它在其他平台（比如OL，StarCoin）也越来越受欢迎。

在本节中，我们主要会讨论关于Move语言的一些重要特性，并且解释如何使用它在Sui上创建和管理资产。关于Move的更全面解释可以在《Move Programming Language》里找到，更对针对Sui的Move内容可以在《Sui开发者门户》里找到，关于Sui上下文中Move的更正式的描述可以在第3节中找到。


### 2.1 概述
Sui的全局状态包括一个可编程的对象池，由Move包来创建和管理，这些可编程对象是包含Move函数和类型的Move模块的集合(详见2.1.1节)。Move包本身也是对象。因此，Sui中描述的对象可以分为以下两类：

- 结构数据值：由Move模块控制的类型化数据。每个对象都是一个结构值，其字段可以包含基本类型(比如整数、地址)、其他对象和非对象结构。
- 包码值(Package code values): 一组作为原子单元被发布的Move字节码模块集合。包中的每个模块既可以依赖于该包中的其他模块，也可以依赖于以前发布的包中的模块。

对象可以对资产进行编码(比如同质化代币/非同质化代币)，授予调用某些函数或创建其他对象的权限的功能，管理其他资产的“智能合约”等。这些全都由程序员们来决定。

声明自定义的Sui对象类型的Move代码如下所示：
```java
    struct Obj has key {
        id:VersionedID, // globally unique ID and version 
        f: u64 // objects can have primitive fields
        g: OtherObj // fields can also store other objects
    }
```
所有表示Sui对象的结构（但不是所有的Move结构值）必须具有id字段和值能力(key ability)，表明值可以存储在Sui的全局对象池中。

#### 2.1.1 模块
Move程序被组织为一组模块，每个模块由结构声明和函数声明的列表组成。一个模块可以从其他模块导入结构类型，并调用由其他模块声明的函数。

在一个Move模块中声明的值可以流动(flow)到另一个模块中，比如上面举例的模块Obj可以定义在与定义Obj的模块不同的模块中。这与大多数智能合约语言不同，后者只允许非结构化的字节跨合约边界流动。但是，Move能够支持这一点，因为它提供了封装特性来帮助程序员编写健壮性强的代码。具体来说，Move的类型系统确保了像上面的Obj这样的类型只能由声明该类型的模块中的函数创建、销毁、复制、读取和写入。这允许模块对其声明的类型强制强不变量，即使它们在流经智能合约信任边界时也会继续保持。


